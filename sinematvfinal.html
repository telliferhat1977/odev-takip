<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SinemaTV PRO ‚Äì iPhone</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
:root{--red:#E50914;--black:#080808}
body{
  background:var(--black);
  color:#fff;
  margin:0;
  padding:10px;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  -webkit-overflow-scrolling:touch;
}
.nav-item{
  cursor:pointer;
  border-radius:14px;
  transition:.15s;
}
.full-modal{
  display:none!important;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.97);
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}
.show-modal{display:flex!important}
#results{padding-bottom:40px}
</style>
</head>

<body onload="loadShowcase()">

<!-- HOME -->
<div id="home">
  <header class="text-center mb-4">
    <h1 class="text-3xl font-black italic text-red-600">SinemaTV PRO</h1>
    <div class="flex gap-2 mt-3">
      <input id="searchInput"
        placeholder="Film / Dizi / Oyuncu"
        class="flex-1 p-3 bg-[#1a1a1a] rounded-xl nav-item">
      <button onclick="searchContent()"
        class="px-6 bg-red-600 rounded-xl font-bold nav-item">ARA</button>
    </div>
  </header>

  <div id="results" class="grid grid-cols-3 gap-4"></div>
</div>

<!-- DETAIL -->
<div id="detailPage" class="full-modal flex-col p-4">
  <div class="flex justify-between mb-4">
    <button onclick="goBack()" class="nav-item px-4 py-2 bg-white/10">‚Üê Geri</button>
    <button onclick="goHome()" class="nav-item px-4 py-2 bg-red-600">üè† Ana Ekran</button>
  </div>
  <img id="detailPoster" class="max-h-[260px] mx-auto rounded-xl mb-4">
  <h2 id="detailTitle" class="text-xl font-black mb-3 text-center"></h2>
  <div id="castList" class="flex flex-wrap gap-2 justify-center mb-6"></div>
  <button onclick="openSources()"
    class="bg-red-600 py-4 rounded-xl font-black nav-item w-full">‚ñ∂ ƒ∞ZLE</button>
</div>

<!-- ACTOR -->
<div id="actorPage" class="full-modal flex-col p-4">
  <div class="flex justify-between mb-4">
    <button onclick="goBack()" class="nav-item px-4 py-2 bg-white/10">‚Üê Geri</button>
    <button onclick="goHome()" class="nav-item px-4 py-2 bg-red-600">üè† Ana Ekran</button>
  </div>
  <img id="actorPhoto" class="w-28 h-28 rounded-full mx-auto mb-3 object-cover">
  <h2 id="actorName" class="text-lg font-black text-center mb-2"></h2>
  <p id="actorBio" class="text-xs text-gray-400 text-center mb-4"></p>

  <div class="flex justify-center gap-2 mb-4">
    <button onclick="setActorFilter('all')" class="nav-item px-3 py-1 bg-[#222]">T√ºm√º</button>
    <button onclick="setActorFilter('movie')" class="nav-item px-3 py-1 bg-[#222]">Film</button>
    <button onclick="setActorFilter('tv')" class="nav-item px-3 py-1 bg-[#222]">Dizi</button>
  </div>

  <div id="actorFilmography" class="grid grid-cols-3 gap-4"></div>
</div>

<!-- SOURCES -->
<div id="selectionModal" class="full-modal flex-col p-4">
  <div class="flex justify-between mb-4">
    <button onclick="goBack()" class="nav-item px-4 py-2 bg-white/10">‚Üê Geri</button>
    <button onclick="goHome()" class="nav-item px-4 py-2 bg-red-600">üè† Ana Ekran</button>
  </div>
  <h2 id="modalTitle" class="text-center font-black mb-4 text-red-600"></h2>
  <div id="modalList" class="space-y-2"></div>
</div>

<!-- PIN -->
<div id="pinModal" class="full-modal flex items-center justify-center">
  <div class="bg-[#111] p-6 rounded-xl w-full max-w-xs text-center">
    <h2 class="font-black mb-3">PIN</h2>
    <input id="pinInput" type="password" maxlength="4"
      class="text-center text-2xl bg-black border border-red-600 p-2 mb-4 w-full">
    <div class="flex gap-2">
      <button onclick="goBack()" class="flex-1 bg-gray-700 p-2 rounded">Geri</button>
      <button onclick="checkPin()" class="flex-1 bg-red-600 p-2 rounded">OK</button>
    </div>
  </div>
</div>

<!-- PLAYER -->
<div id="videoLayer" class="fixed inset-0 bg-black z-50 hidden flex-col">
  <button onclick="closePlayer()"
    class="m-3 bg-white/10 px-6 py-2 rounded-full nav-item">‚Üê Kapat</button>
  <iframe id="playerFrame" class="flex-1 w-full" allowfullscreen playsinline></iframe>
</div>

<script>
/* ===== NAVIGATION (HAFIZA TEMELLƒ∞) ===== */
let historyStack=[];
let currentView="home";

function showView(v){
  document.querySelectorAll(".full-modal").forEach(m=>m.classList.remove("show-modal"));
  document.getElementById("home").style.display=v==="home"?"block":"none";
  if(v!=="home")document.getElementById(v).classList.add("show-modal");
  currentView=v;
}
function navigate(to){
  if(currentView!==to)historyStack.push(currentView);
  showView(to);
}
function goBack(){
  if(!historyStack.length){goHome();return;}
  showView(historyStack.pop());
}
function goHome(){
  historyStack=[];
  showView("home");
}

/* ===== TMDB ===== */
const TMDB="847629da5649502fa6655f73b15a5c8e";
const SAFE_PIN="1234";
let currentId,currentType,imdbId;
let actorCredits=[],actorFilter="all";

/* LOAD */
async function loadShowcase(){
  const r=await fetch(`https://api.themoviedb.org/3/trending/all/day?api_key=${TMDB}&language=tr`);
  displayItems((await r.json()).results);
}

/* SEARCH */
async function searchContent(){
  const q=searchInput.value.trim();
  if(!q)return loadShowcase();
  const r=await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${TMDB}&query=${q}&language=tr`);
  displayItems((await r.json()).results);
}

/* LIST */
function displayItems(items){
  results.innerHTML="";
  items.forEach(i=>{
    if(i.media_type==="person"){openActor(i.id);return;}
    if(!i.poster_path)return;
    const type=i.media_type||(i.first_air_date?"tv":"movie");
    const b=document.createElement("button");
    b.className="nav-item";
    b.innerHTML=`<img src="https://image.tmdb.org/t/p/w300${i.poster_path}" class="rounded-lg"><div class="text-[10px] font-bold truncate mt-1">${i.title||i.name}</div>`;
    b.onclick=()=>openDetails(i.id,type);
    results.appendChild(b);
  });
}

/* DETAIL */
async function openDetails(id,type){
  currentId=id;currentType=type;
  const r=await fetch(`https://api.themoviedb.org/3/${type}/${id}?api_key=${TMDB}&language=tr&append_to_response=credits,external_ids`);
  const d=await r.json();
  imdbId=d.external_ids.imdb_id;
  detailPoster.src=`https://image.tmdb.org/t/p/w500${d.poster_path}`;
  detailTitle.innerText=d.title||d.name;
  castList.innerHTML="";
  d.credits.cast.slice(0,8).forEach(a=>{
    const c=document.createElement("button");
    c.className="nav-item bg-[#222] px-3 py-1 text-xs";
    c.innerText=a.name;
    c.onclick=()=>openActor(a.id);
    castList.appendChild(c);
  });
  navigate("detailPage");
}

/* ACTOR */
async function openActor(id){
  const r=await fetch(`https://api.themoviedb.org/3/person/${id}?api_key=${TMDB}&language=tr&append_to_response=combined_credits`);
  const d=await r.json();
  actorName.innerText=d.name;
  actorBio.innerText=d.biography||"Biyografi yok.";
  actorPhoto.src=d.profile_path?`https://image.tmdb.org/t/p/w300${d.profile_path}`:"";
  actorCredits=d.combined_credits.cast;
  renderActor();
  navigate("actorPage");
}
function renderActor(){
  actorFilmography.innerHTML="";
  actorCredits.filter(i=>i.poster_path&&(actorFilter==="all"||i.media_type===actorFilter))
  .forEach(i=>{
    const type=i.media_type==="tv"?"tv":"movie";
    const b=document.createElement("button");
    b.className="nav-item";
    b.innerHTML=`<img src="https://image.tmdb.org/t/p/w300${i.poster_path}" class="rounded-lg"><div class="text-[10px] font-bold truncate mt-1">${i.title||i.name}</div>`;
    b.onclick=()=>openDetails(i.id,type);
    actorFilmography.appendChild(b);
  });
}
function setActorFilter(f){actorFilter=f;renderActor();}

/* SOURCES */
function openSources(){
  const list=[
    {n:"VIDSRC.ME",f:()=>play("vidsrcme")},
    {n:"VIDLINK",f:()=>play("vidlink")},
    {n:"VIDSRC.XYZ",f:()=>play("vidsrc")},
    {n:"SUPEREMBED",f:()=>play("super")},
    {n:"HARƒ∞Cƒ∞ KAYNAKLAR",f:()=>navigate("pinModal")}
  ];
  modalTitle.innerText="KAYNAKLAR";
  modalList.innerHTML="";
  list.forEach(x=>{
    const b=document.createElement("button");
    b.className="nav-item w-full bg-[#222] p-3";
    b.innerText=x.n;
    b.onclick=x.f;
    modalList.appendChild(b);
  });
  navigate("selectionModal");
}

/* PIN */
function checkPin(){
  if(pinInput.value!==SAFE_PIN){alert("Hatalƒ± PIN");return;}
  goBack();
  openExternal();
}
function openExternal(){
  const q=encodeURIComponent(detailTitle.innerText);
  ["EROGARGA","TUBE PORN CLASSIC","XNXX","XVIDEOS","NOODLEMAGAZINE"]
  .forEach((n,i)=>window.open([
    `https://www.erogarga.com/?s=${q}`,
    `https://tubepornclassic.com/search/1/?s=${q}`,
    `https://www.xnxx.com/search/${q}`,
    `https://www.xvideos.com/?k=${q}`,
    `https://noodlemagazine.com/video/${q}`
  ][i],"_blank"));
}

/* PLAYER */
function play(src){
  let url="";
  if(src==="vidsrcme")url=`https://vidsrc.me/embed/movie?tmdb=${currentId}&ds_lang=tr`;
  if(src==="vidlink")url=`https://vidlink.pro/movie/${currentId}?subs=tr`;
  if(src==="vidsrc")url=`https://vidsrc.xyz/embed/movie?imdb=${imdbId}`;
  if(src==="super")url=`https://multiembed.mov/directstream.php?video_id=${currentId}&tmdb=1`;
  playerFrame.src=url;
  videoLayer.style.display="flex";
}
function closePlayer(){
  playerFrame.src="";
  videoLayer.style.display="none";
}
</script>

</body>
</html>