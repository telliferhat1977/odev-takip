<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telefon Uyumlu Ã–dev Takip</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#3498db">
<style>
body{font-family:Arial,sans-serif;background:#f4f6f8;margin:0;padding:10px}
h1,h2{text-align:center}
.section{background:#fff;padding:15px;margin-bottom:15px;border-radius:12px;box-shadow:0 3px 10px rgba(0,0,0,.1)}
input,select,button{width:100%;padding:14px;margin-top:6px;margin-bottom:12px;font-size:1rem}
button{border:none;border-radius:10px;background:#3498db;color:#fff}
button.secondary{background:#7f8c8d}
button.danger{background:#e74c3c}
.ogrenci{background:#ecf0f1;padding:10px;border-radius:10px;margin-bottom:8px}
.row{display:flex;gap:8px;margin-top:8px}
.row button{flex:1}
</style>
</head>
<body>

<h1>ğŸ“˜ Ã–dev Takip Sistemi</h1>
<p id="baslik" style="text-align:center;font-weight:bold"></p>

<div class="section">
<h2>ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci Ekle / GÃ¼ncelle</h2>
<input id="ad" placeholder="Ad Soyad">
<input id="no" placeholder="Numara">
<input id="sinif" placeholder="SÄ±nÄ±f">
<button id="kaydetBtn">Kaydet</button>
<button class="secondary" id="iptalBtn">Ä°ptal</button>
<div id="liste"></div>
</div>

<div class="section">
<h2>ğŸ“‹ Ã–dev Kontrol</h2>
<select id="odevSinif"></select>
<div id="odevOgrenciListesi"></div>
</div>

<script>
// ===== GLOBAL =====
let ogrenciler = JSON.parse(localStorage.getItem('ogrenciler')) || [];
let odevler = JSON.parse(localStorage.getItem('odevler')) || [];
let seciliNo = null;

// ===== ELEMENTLER =====
const adInp = document.getElementById('ad');
const noInp = document.getElementById('no');
const sinifInp = document.getElementById('sinif');
const kaydetBtn = document.getElementById('kaydetBtn');
const iptalBtn = document.getElementById('iptalBtn');
const listeDiv = document.getElementById('liste');
const odevSinif = document.getElementById('odevSinif');
const odevListe = document.getElementById('odevOgrenciListesi');

// ===== EVENTLER =====
kaydetBtn.addEventListener('click', kaydet);
iptalBtn.addEventListener('click', iptal);
odevSinif.addEventListener('change', odevSinifDegisti);

// ===== FONKSÄ°YONLAR =====
function kaydet(){
  const ad = adInp.value.trim();
  const no = noInp.value.trim();
  const sinif = sinifInp.value.trim();

  if(!ad || !no || !sinif){
    alert('TÃ¼m alanlarÄ± doldurun');
    return;
  }

  if(seciliNo){
    if(!confirm('Ã–ÄŸrenci bilgileri gÃ¼ncellensin mi?')) return;
    const o = ogrenciler.find(x => x.no === seciliNo);
    if(!o){ alert('Ã–ÄŸrenci bulunamadÄ±'); return; }
    o.ad = ad;
    o.no = no;
    o.sinif = sinif;
    seciliNo = null;
    kaydetBtn.textContent = 'Kaydet';
  } else {
    if(ogrenciler.some(x => x.no === no)){
      alert('Bu numarada Ã¶ÄŸrenci var');
      return;
    }
    ogrenciler.push({ad,no,sinif});
  }

  localStorage.setItem('ogrenciler', JSON.stringify(ogrenciler));
  temizle();
  listele();
  siniflariDoldur();
}

function duzenle(no){
  const o = ogrenciler.find(x => x.no === no);
  if(!o) return;
  adInp.value = o.ad;
  noInp.value = o.no;
  sinifInp.value = o.sinif;
  seciliNo = no;
  kaydetBtn.textContent = 'GÃ¼ncelle';
}

function sil(no){
  const o = ogrenciler.find(x => x.no === no);
  if(!o) return;
  if(!confirm(o.ad + ' silinsin mi?')) return;
  ogrenciler = ogrenciler.filter(x => x.no !== no);
  odevler = odevler.filter(x => x.no !== no);
  localStorage.setItem('ogrenciler', JSON.stringify(ogrenciler));
  localStorage.setItem('odevler', JSON.stringify(odevler));
  listele();
  siniflariDoldur();
}

function listele(){
  listeDiv.innerHTML = '';
  ogrenciler.forEach(o => {
    const d = document.createElement('div');
    d.className = 'ogrenci';
    d.innerHTML = `<b>${o.ad}</b><br>No: ${o.no} | ${o.sinif}
      <div class='row'>
        <button onclick="duzenle('${o.no}')">âœï¸</button>
        <button class='danger' onclick="sil('${o.no}')">ğŸ—‘ï¸</button>
      </div>`;
    listeDiv.appendChild(d);
  });
}

function temizle(){
  adInp.value = '';
  noInp.value = '';
  sinifInp.value = '';
}

function iptal(){
  temizle();
  seciliNo = null;
  kaydetBtn.textContent = 'Kaydet';
}

function siniflariDoldur(){
  odevSinif.innerHTML = '<option value="">SÄ±nÄ±f SeÃ§</option>';
  [...new Set(ogrenciler.map(o => o.sinif))].forEach(s => {
    const opt = document.createElement('option');
    opt.value = s;
    opt.textContent = s;
    odevSinif.appendChild(opt);
  });
}

function odevSinifDegisti(){
  const sinif = odevSinif.value;
  odevListe.innerHTML = '';
  const tarih = new Date().toISOString().split('T')[0];

  ogrenciler.filter(o => o.sinif === sinif).forEach(o => {
    const d = document.createElement('div');
    d.className = 'ogrenci';
    d.innerHTML = `<b>${o.ad}</b>
      <div class='row'>
        <button onclick="odevKaydet('${o.no}',true)">âœ…</button>
        <button class='danger' onclick="odevKaydet('${o.no}',false)">âŒ</button>
      </div>`;
    odevListe.appendChild(d);
  });
}

function odevKaydet(no, yapti){
  const tarih = new Date().toISOString().split('T')[0];
  const i = odevler.findIndex(o => o.no === no && o.tarih === tarih);
  if(i > -1) odevler[i].yapti = yapti;
  else odevler.push({no, tarih, yapti});
  localStorage.setItem('odevler', JSON.stringify(odevler));
}

// ===== INIT =====
listele();
siniflariDoldur();
</script>
</body>
</html>
