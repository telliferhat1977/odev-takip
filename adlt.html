<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SinemaTV PRO – FULL</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{--red:#E50914;--black:#080808}
body{background:var(--black);color:#fff;margin:0;padding:10px;font-family:sans-serif;overflow:hidden}
.nav-item{cursor:pointer;border-radius:12px;transition:.15s}
.nav-item:focus{outline:none;background:var(--red);transform:scale(1.05)}
.full-modal{display:none!important;position:fixed;inset:0;background:rgba(0,0,0,.97);overflow-y:auto}
.show-modal{display:flex!important}
#results{height:calc(100vh - 170px);overflow-y:auto}
</style>
</head>
<body>
<header class="text-center mb-4">
<h1 class="text-3xl font-black italic text-red-600">SinemaTV PRO</h1>
<div class="flex gap-2 mt-3">
<input id="searchInput" placeholder="Film / Dizi / Oyuncu"
 class="flex-1 p-3 bg-[#1a1a1a] rounded-xl nav-item">
<button onclick="searchContent()"
 class="px-6 bg-red-600 rounded-xl font-bold nav-item">ARA</button>
</div>
</header>
<div id="results" class="grid grid-cols-3 sm:grid-cols-5 gap-4"></div>

<!-- DETAIL, ACTOR, SELECTION, PIN, PLAYER aynı kaldı -->

<script>
const TMDB = "847629da5649502fa6655f73b15a5c8e";
const SAFE_PIN = "7193";
let currentId, currentType, currentS = 1, currentE = 1, imdbId;
let actorCredits = [], actorFilter = "all";
let displayedCount = 0;
const itemsPerLoad = 30;
let actorObserver = null;
let menuStack = [];
let pageHistory = [];
let isAuthenticated = false;

window.addEventListener('load', () => {
    pageHistory.push({ type: "main" });
});

function closeApp() {
    alert("Çıkış yapılıyor...");
}

async function checkPin() {
    if (pinInput.value !== SAFE_PIN) {
        alert("Hatalı PIN");
        pinInput.value = "";
        return;
    }
    isAuthenticated = true;
    pinModal.classList.remove("show-modal");
    pinInput.value = "";
    loadShowcase();
}

async function loadShowcase() {
    if (!isAuthenticated) return;

    let allAdultFilms = [];
    let page = 1;
    const maxPages = 10; // 10 sayfa çek (yeterli adult film bulmak için)

    while (page <= maxPages && allAdultFilms.length < 50) {
        const r = await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${TMDB}&language=tr&sort_by=popularity.desc&include_adult=true&page=${page}`);
        const data = await r.json();
        if (data.results.length === 0) break;

        const adultFilms = data.results.filter(item => item.adult === true && item.poster_path);
        allAdultFilms = [...allAdultFilms, ...adultFilms];

        page++;
    }

    // En az 20 tane adult film göster (bulamazsa boş kalmasın diye fallback normal popüler)
    if (allAdultFilms.length >= 20) {
        displayItems(allAdultFilms);
    } else {
        // Fallback: Normal popüler filmler (adult dahil ama filtre olmadan)
        const fallback = await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${TMDB}&language=tr&sort_by=popularity.desc&include_adult=true&page=1`);
        const fbData = await fallback.json();
        displayItems(fbData.results);
    }
}

// searchContent, displayItems, openDetails, openActor vb. aynı kaldı (adult=true gösteriliyor)

// ... (diğer tüm fonksiyonlar önceki kod gibi aynı kalıyor)
</script>
</body>
</html>